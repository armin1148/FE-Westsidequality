"use client";

import { useState } from "react";
import BaseContainer from "./base-container";
import { cn, smoothScrollToId } from "@/lib/utils";
import { ANCHOR_IDS } from "@/lib/constants";
import Image from "next/image";

const MENU_ITEMS = [
  { label: "DỊCH VỤ", href: ANCHOR_IDS.SERVICES },
  { label: "LĨNH VỰC", href: ANCHOR_IDS.EXPERTISE },
  { label: "CASE STUDY", href: ANCHOR_IDS.CASE_STUDY },
  { label: "VỀ CHÚNG TÔI", href: ANCHOR_IDS.ABOUT_US },
  { label: "CHUYÊN MÔN", href: ANCHOR_IDS.TECH_STACK },
];

const Header = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [activeAnchor, setActiveAnchor] = useState<string>("");
  const handleToggle = () => setIsOpen(!isOpen);

  return (
    <header
      className="fixed top-0 left-0 right-0 z-50 flex flex-col justify-center items-start h-[50px] lg:h-[72px] overflow-hidden bg-white lg:bg-[#F9FAFB]"
      style={{
        boxShadow:
          "0px 10px 15px -3px rgba(0,0,0,0.1), 0px 4px 6px -4px rgba(0,0,0,0.1)",
      }}
    >
      <BaseContainer>
        <div className="flex justify-between items-center h-[50px] lg:h-[72px]">
          <h1 className="flex-grow-0 flex-shrink-0 w-[90px] h-[32px] lg:w-[157px] lg:h-[56px] relative">
            <svg
              width="157"
              height="56"
              viewBox="0 0 157 56"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className="size-full"
            >
              <g clipPath="url(#clip0_327_696)">
                <g clipPath="url(#clip1_327_696)">
                  <path
                    d="M45.3979 5.89354H48.8365L52.3042 19.4726L56.3095 5.89354H59.4396L63.5742 19.5268L66.9377 5.89354H70.3012L65.3205 24.7366H62.0362L57.8767 11.2326L53.7171 24.7366H50.4328L45.4021 5.89354H45.3979Z"
                    fill="black"
                  />
                  <path
                    d="M72.4812 5.89354H82.6717V8.99863H75.8155V13.5416H82.5926V16.6467H75.8155V21.6274H82.7968V24.7325H72.4771V5.89354H72.4812Z"
                    fill="black"
                  />
                  <path
                    d="M85.3182 24.7367V21.5774C86.8603 21.7316 87.8356 21.7816 88.5775 21.7816C90.8615 21.7816 91.941 21.0647 91.941 19.5226C91.941 18.5223 91.4534 17.7512 89.9654 16.7759L87.9648 15.4922C86.0142 14.2085 85.064 12.6164 85.064 10.6658C85.064 7.5357 87.348 5.66014 91.2241 5.66014C92.0452 5.66014 92.9455 5.73516 93.9958 5.88938V8.86526C92.9705 8.73606 92.0702 8.63603 91.3242 8.63603C89.3736 8.63603 88.3983 9.30289 88.3983 10.5616C88.3983 11.4327 88.8859 12.1287 90.1446 12.9248L91.891 14.0543C94.2542 15.5673 95.3045 17.2636 95.3045 19.4726C95.3045 22.9653 92.8913 24.9659 88.6567 24.9659C87.8356 24.9659 86.8353 24.9159 85.3182 24.7367Z"
                    fill="black"
                  />
                  <path
                    d="M100.385 9.0028H95.8672V5.89771H108.242V9.0028H103.724V24.7408H100.385V9.0028Z"
                    fill="black"
                  />
                  <path
                    d="M109.604 24.7367V21.5774C111.146 21.7316 112.122 21.7816 112.864 21.7816C115.148 21.7816 116.227 21.0647 116.227 19.5226C116.227 18.5223 115.74 17.7512 114.252 16.7759L112.251 15.4922C110.3 14.2085 109.35 12.6164 109.35 10.6658C109.35 7.5357 111.634 5.66014 115.51 5.66014C116.331 5.66014 117.232 5.73516 118.282 5.88938V8.86526C117.257 8.73606 116.356 8.63603 115.61 8.63603C113.66 8.63603 112.684 9.30289 112.684 10.5616C112.684 11.4327 113.172 12.1287 114.431 12.9248L116.177 14.0543C118.54 15.5673 119.591 17.2636 119.591 19.4726C119.591 22.9653 117.177 24.9659 112.943 24.9659C112.122 24.9659 111.121 24.9159 109.604 24.7367Z"
                    fill="black"
                  />
                  <path
                    d="M122.129 5.89354H125.467V24.7366H122.129V5.89354Z"
                    fill="black"
                  />
                  <path
                    d="M129.114 5.89366H134.533C140.309 5.89366 144.39 9.56559 144.39 15.3131C144.39 21.0607 140.309 24.7368 134.533 24.7368H129.114V5.89366ZM134.528 21.5567C138.355 21.5567 140.922 19.2185 140.922 15.3173C140.922 11.4161 138.355 9.07794 134.528 9.07794H132.449V21.5567H134.528Z"
                    fill="black"
                  />
                  <path
                    d="M147.082 5.89354H157.273V8.99863H150.417V13.5416H157.194V16.6467H150.417V21.6274H157.398V24.7325H147.078V5.89354H147.082Z"
                    fill="black"
                  />
                  <path
                    d="M45.3979 40.4538C45.3979 34.6771 49.6867 30.7759 55.0508 30.7759C60.4149 30.7759 64.6537 34.6771 64.6537 40.1454C64.6537 43.2505 63.3199 45.6387 61.4194 47.1558H64.6287V49.9817H55.055C49.4325 49.9817 45.4021 46.1555 45.4021 40.458L45.3979 40.4538ZM55.0508 46.8724C58.5435 46.8724 61.236 44.355 61.236 40.4538C61.236 36.5527 58.4643 33.9602 55.0508 33.9602C51.6373 33.9602 48.8656 36.5527 48.8656 40.4538C48.8656 44.355 51.5623 46.8724 55.0508 46.8724Z"
                    fill="black"
                  />
                  <path
                    d="M67.3711 42.817V31.1344H70.7096V42.5836C70.7096 45.6137 71.9141 47.1516 74.2273 47.1516C76.5405 47.1516 77.795 45.5845 77.795 42.5836V31.1344H81.1335V42.817C81.1335 47.6185 78.5661 50.3401 74.2273 50.3401C69.8885 50.3401 67.3711 47.6185 67.3711 42.817Z"
                    fill="black"
                  />
                  <path
                    d="M88.836 31.1344H92.0953L98.5388 49.9775H95.0461L93.9416 46.564H86.9604L85.8809 49.9775H82.4424L88.836 31.1344ZM93.0205 43.6631L90.4281 35.6774L87.8857 43.6631H93.0205Z"
                    fill="black"
                  />
                  <path
                    d="M100.439 31.1344H103.778V46.8724H110.659V49.9775H100.444V31.1344H100.439Z"
                    fill="black"
                  />
                  <path
                    d="M112.63 31.1344H115.969V49.9775H112.63V31.1344Z"
                    fill="black"
                  />
                  <path
                    d="M122.437 34.2436H117.919V31.1385H130.293V34.2436H125.775V49.9816H122.437V34.2436Z"
                    fill="black"
                  />
                  <path
                    d="M136.405 42.5837L130.474 31.1344H134.246L138.097 38.9909L141.923 31.1344H145.441L139.743 42.5837V49.9775H136.405V42.5837Z"
                    fill="black"
                  />
                  <path
                    d="M24.3687 28.5149L22.8833 30.0644L23.81 30.9528L25.2954 29.4033L24.3687 28.5149Z"
                    fill="black"
                  />
                  <path
                    d="M13.7413 24.028L12.584 24.5835L15.273 30.1859L16.4303 29.6304L13.7413 24.028Z"
                    fill="black"
                  />
                  <path
                    d="M21.0445 27.2537L19.8872 27.8092L21.0288 30.1877L22.1861 29.6322L21.0445 27.2537Z"
                    fill="black"
                  />
                  <path
                    d="M17.8779 27.2473L16.7349 29.6298L17.8923 30.185L19.0353 27.8026L17.8779 27.2473Z"
                    fill="black"
                  />
                  <path
                    d="M12.7966 25.4869C11.6837 25.4869 10.7793 24.5824 10.7793 23.4696C10.7793 22.3568 11.6837 21.4523 12.7966 21.4523C13.9094 21.4523 14.8138 22.3568 14.8138 23.4696C14.8138 24.5824 13.9094 25.4869 12.7966 25.4869ZM12.7966 22.7319C12.3923 22.7319 12.0588 23.0612 12.0588 23.4696C12.0588 23.8781 12.3881 24.2073 12.7966 24.2073C13.205 24.2073 13.5343 23.8781 13.5343 23.4696C13.5343 23.0612 13.205 22.7319 12.7966 22.7319Z"
                    fill="black"
                  />
                  <path
                    d="M19.4362 28.842C18.3234 28.842 17.4189 27.9376 17.4189 26.8248C17.4189 25.7119 18.3234 24.8075 19.4362 24.8075C20.549 24.8075 21.4535 25.7119 21.4535 26.8248C21.4535 27.9376 20.549 28.842 19.4362 28.842ZM19.4362 26.0871C19.0319 26.0871 18.6985 26.4163 18.6985 26.8248C18.6985 27.2332 19.0278 27.5625 19.4362 27.5625C19.8447 27.5625 20.1739 27.2332 20.1739 26.8248C20.1739 26.4163 19.8447 26.0871 19.4362 26.0871Z"
                    fill="black"
                  />
                  <path
                    d="M16.5768 32.7974C15.464 32.7974 14.5596 31.893 14.5596 30.7801C14.5596 29.6673 15.464 28.7629 16.5768 28.7629C17.6897 28.7629 18.5941 29.6673 18.5941 30.7801C18.5941 31.893 17.6897 32.7974 16.5768 32.7974ZM16.5768 30.0424C16.1726 30.0424 15.8391 30.3717 15.8391 30.7801C15.8391 31.1886 16.1684 31.5179 16.5768 31.5179C16.9853 31.5179 17.3146 31.1886 17.3146 30.7801C17.3146 30.3717 16.9853 30.0424 16.5768 30.0424Z"
                    fill="black"
                  />
                  <path
                    d="M22.2995 32.7974C21.1867 32.7974 20.2822 31.893 20.2822 30.7801C20.2822 29.6673 21.1867 28.7629 22.2995 28.7629C23.4123 28.7629 24.3168 29.6673 24.3168 30.7801C24.3168 31.893 23.4123 32.7974 22.2995 32.7974ZM22.2995 30.0424C21.8952 30.0424 21.5618 30.3717 21.5618 30.7801C21.5618 31.1886 21.891 31.5179 22.2995 31.5179C22.7079 31.5179 23.0372 31.1886 23.0372 30.7801C23.0372 30.3717 22.7079 30.0424 22.2995 30.0424Z"
                    fill="black"
                  />
                  <path
                    d="M31.9183 30.9552C31.2931 31.3011 30.5763 31.497 29.8177 31.497C27.4128 31.497 25.4539 29.5381 25.4539 27.1332C25.4539 24.7283 27.4128 22.7694 29.8177 22.7694C32.2226 22.7694 34.1815 24.7283 34.1815 27.1332C34.1815 28.3461 33.6813 29.4464 32.8769 30.2383L33.6647 31.2553C34.7692 30.2258 35.461 28.7629 35.461 27.1332C35.461 24.0156 32.9311 21.4857 29.8135 21.4857C26.6959 21.4857 24.166 24.0156 24.166 27.1332C24.166 30.2508 26.6959 32.7807 29.8135 32.7807C30.8722 32.7807 31.86 32.4848 32.7061 31.9763L31.9142 30.9552H31.9183Z"
                    fill="#0093FF"
                  />
                  <path
                    d="M29.818 24.8992C31.0517 24.8992 32.052 25.9037 32.052 27.1332C32.052 28.3628 31.0475 29.3672 29.818 29.3672C28.5885 29.3672 27.584 28.3628 27.584 27.1332C27.584 25.9037 28.5885 24.8992 29.818 24.8992ZM29.818 23.6155C27.8758 23.6155 26.3003 25.191 26.3003 27.1332C26.3003 29.0755 27.8758 30.6509 29.818 30.6509C31.7603 30.6509 33.3357 29.0755 33.3357 27.1332C33.3357 25.191 31.7603 23.6155 29.818 23.6155Z"
                    fill="#0093FF"
                  />
                  <path
                    d="M10.4835 56.0001C9.12056 56.0001 7.99939 55.475 7.245 54.4788C6.50312 53.4994 6.14468 52.1323 6.14468 50.2901V38.2282C6.14468 34.4812 7.04078 33.1183 8.04107 31.943C8.45786 31.4512 8.58707 31.3053 8.58707 30.7468C8.58707 29.8215 7.94938 29.4339 5.89877 28.667C5.30276 28.4461 4.68591 28.2127 4.10657 27.9251C2.23101 26.9873 0.93896 25.5077 0.655542 23.9656C0.447147 22.8403 0.772244 21.7733 1.59749 20.873C2.73116 19.6351 4.39832 19.5559 5.86543 19.4809C7.49091 19.4017 8.52455 19.2934 9.18308 18.4848C9.45816 18.1472 9.72491 17.7971 9.97915 17.4553C11.5921 15.3255 13.2635 13.1249 17.8106 13.1249C20.4948 13.1249 23.0622 14.0335 24.9336 14.692C25.6963 14.9629 26.7008 15.3172 27.1843 15.3797C27.0884 15.0129 26.5841 13.8959 23.9458 11.3618C21.6993 9.20287 20.9491 6.26449 21.9869 3.68456C22.9038 1.40888 25.0461 -0.00820923 27.5844 -0.00820923C30.8103 -0.00820923 32.5025 1.20882 33.3569 2.23412C34.0905 3.10939 34.4656 4.1722 34.3614 5.03913C34.3364 6.06026 33.9071 6.93136 33.4986 7.77744C32.6984 9.4196 32.0649 10.72 34.1405 13.1957C34.7282 13.9001 35.27 14.5169 35.7952 15.113C38.7752 18.5098 40.5716 20.5604 40.5716 26.6164C40.5716 32.6723 36.2745 37.4529 28.468 40.1913C23.1831 42.046 22.4954 42.817 18.7151 48.2645C14.9014 53.7536 13.0884 55.9918 10.4876 55.9918L10.4835 56.0001ZM17.8106 15.6965C14.5347 15.6965 13.5344 17.0177 12.0214 19.0141C11.7505 19.3684 11.4754 19.7352 11.1712 20.1103C9.74575 21.865 7.66179 21.965 5.99046 22.0484C4.91931 22.1025 3.91068 22.1484 3.48972 22.611C3.13961 22.9945 3.13961 23.2904 3.18129 23.503C3.3105 24.2115 4.16492 25.0868 5.25691 25.6328C5.71538 25.862 6.24471 26.0579 6.8032 26.2663C8.64125 26.954 11.1587 27.8959 11.1587 30.7468C11.1587 32.2514 10.5168 33.0058 9.99999 33.6101C9.39981 34.3145 8.71627 35.1147 8.71627 38.2282V50.2901C8.71627 53.4369 9.91246 53.4369 10.4876 53.4369C11.6546 53.4369 13.0842 51.8906 16.6103 46.8099C20.4448 41.2874 21.5784 39.9037 27.6219 37.7822C30.6395 36.7236 33.1569 35.2773 34.8991 33.6018C36.9622 31.6179 38.0083 29.2713 38.0083 26.6247C38.0083 21.5315 36.7121 20.0519 33.8654 16.8135C33.3569 16.2341 32.7818 15.5798 32.1774 14.8545C29.0306 11.0993 30.331 8.42763 31.1938 6.66044C31.5189 5.99358 31.7981 5.41841 31.7981 4.94326V4.82656L31.8148 4.74321C31.8106 4.6265 31.7064 4.18887 31.2521 3.72624C30.727 3.19274 29.6683 2.55922 27.5886 2.55922C26.0964 2.55922 24.8961 3.33862 24.3709 4.64318C23.8708 5.88521 23.9625 7.81912 25.7297 9.51129C28.7181 12.3788 29.9226 14.2585 29.7642 15.7882C29.71 16.3258 29.4558 17.0802 28.5722 17.6304C27.4844 18.3097 26.0589 17.8054 24.0875 17.1094C22.2953 16.4759 20.0613 15.6881 17.819 15.6881L17.8106 15.6965Z"
                    fill="#0093FF"
                  />
                </g>
              </g>
              <defs>
                <clipPath id="clip0_327_696">
                  <rect width="157" height="56" fill="white" />
                </clipPath>
                <clipPath id="clip1_327_696">
                  <rect
                    width="156.805"
                    height="56"
                    fill="white"
                    transform="translate(0.597656)"
                  />
                </clipPath>
              </defs>
            </svg>
          </h1>

          <div className="justify-start items-center self-stretch flex-grow-0 flex-shrink-0 hidden lg:flex">
            {MENU_ITEMS.map((item, index) => (
              <div
                key={index}
                className={cn(
                  "flex flex-col justify-center items-start self-stretch cursor-pointer flex-grow-0 flex-shrink-0 px-4 border-b-4 border-transparent",
                  activeAnchor === item.href
                    ? "border-[#0093ff] font-bold [&_p]:font-bold"
                    : ""
                )}
                onClick={() => {
                  smoothScrollToId(item.href);
                  setActiveAnchor(item.href);
                }}
              >
                <div className="flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 relative px-3 py-2">
                  <p className="flex-grow-0 flex-shrink-0 text-base font-medium text-left uppercase text-[#414652]">
                    {item.label}
                  </p>
                </div>
              </div>
            ))}
          </div>
          <div className="lg:hidden">
            <div className="cursor-pointer" onClick={handleToggle}>
              {isOpen ? (
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clipPath="url(#clip0_237_803)">
                    <path
                      d="M3.03331 22.0001C2.76987 22.0001 2.50642 21.8999 2.30625 21.6982C1.90443 21.2964 1.90443 20.6449 2.30625 20.2431L20.2479 2.3014C20.6498 1.89957 21.3012 1.89957 21.7031 2.3014C22.1049 2.70323 22.1049 3.3547 21.7031 3.75678L3.76163 21.6982C3.55996 21.8986 3.29651 22.0001 3.03331 22.0001Z"
                      fill="black"
                    />
                    <path
                      d="M20.9762 22.0001C20.7128 22.0001 20.4496 21.8999 20.2492 21.6982L2.30625 3.75678C1.90443 3.3547 1.90443 2.70323 2.30625 2.3014C2.70808 1.89957 3.35955 1.89957 3.76163 2.3014L21.7031 20.2431C22.1049 20.6449 22.1049 21.2964 21.7031 21.6982C21.5014 21.8986 21.2382 22.0001 20.9762 22.0001Z"
                      fill="black"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_237_803">
                      <rect
                        width="20"
                        height="20"
                        fill="white"
                        transform="translate(2 2.00003)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              ) : (
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M22.8 13.2H1.2C0.881741 13.2 0.576516 13.0735 0.351472 12.8485C0.126428 12.6235 0 12.3182 0 12C0 11.6817 0.126428 11.3765 0.351472 11.1515C0.576516 10.9264 0.881741 10.8 1.2 10.8H22.8C23.1182 10.8 23.4235 10.9264 23.6485 11.1515C23.8735 11.3765 24 11.6817 24 12C24 12.3182 23.8735 12.6235 23.6485 12.8485C23.4235 13.0735 23.1182 13.2 22.8 13.2ZM22.8 4.79999H1.2C0.881741 4.79999 0.576516 4.67356 0.351472 4.44853C0.126428 4.22348 0 3.91826 0 3.59999C0 3.28173 0.126428 2.97651 0.351472 2.75146C0.576516 2.52643 0.881741 2.39999 1.2 2.39999H22.8C23.1182 2.39999 23.4235 2.52643 23.6485 2.75146C23.8735 2.97651 24 3.28173 24 3.59999C24 3.91826 23.8735 4.22348 23.6485 4.44853C23.4235 4.67356 23.1182 4.79999 22.8 4.79999ZM22.8 21.6H1.2C0.881741 21.6 0.576516 21.4735 0.351472 21.2485C0.126428 21.0235 0 20.7182 0 20.4C0 20.0818 0.126428 19.7765 0.351472 19.5515C0.576516 19.3265 0.881741 19.2 1.2 19.2H22.8C23.1182 19.2 23.4235 19.3265 23.6485 19.5515C23.8735 19.7765 24 20.0818 24 20.4C24 20.7182 23.8735 21.0235 23.6485 21.2485C23.4235 21.4735 23.1182 21.6 22.8 21.6Z"
                    fill="#353945"
                  />
                </svg>
              )}
            </div>

            <nav
              className={cn(
                "fixed top-[50px] w-full h-full bg-white z-50 pt-8 px-6 border-t border-[#DEDEDE] transition-all duration-300 overflow-hidden",
                isOpen ? "left-0" : "left-full"
              )}
            >
              <ul className="z-10 relative">
                {MENU_ITEMS.map((item, index) => (
                  <li
                    key={index}
                    className="mt-1 border-b border-[#C2E5FF] text-base font-semibold cursor-pointer"
                  >
                    <p
                      className="py-4"
                      onClick={() => {
                        smoothScrollToId(item.href);
                        setIsOpen(false);
                      }}
                    >
                      {item.label}
                    </p>
                  </li>
                ))}
              </ul>
              <div className="absolute bottom-0 left-0 w-full aspect-[375/440] z-0">
                <Image
                  src="/images/main-sp.png"
                  alt="logo"
                  fill
                  className="object-cover"
                />
              </div>
            </nav>
          </div>
        </div>
      </BaseContainer>
    </header>
  );
};

export default Header;
